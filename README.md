# Bioinformatics Query Agent

An intelligent bioinformatics query agent system based on LLM and LangGraph for processing natural language queries related to bioinformatics.

## Project Overview

This project is a multi-node workflow agent that understands users' bioinformatics questions, automatically extracts biological entities (genes, proteins, diseases, cells, etc.), searches for relevant information in knowledge graphs using hybrid retrieval techniques, and returns structured query results.

## Core Features

### Supported Query Types

1. **Most Related Query (Type 1)**
   - Example: "What are the most related diseases to Isl1?"
   - Query the most related target category for a biological entity

2. **Relationship Query (Type 2)**
   - Example: "What is the relationship between ISL1 gene and white blood cells?"
   - Query relationships between two or more biological terms

3. **Terminology Definition Query (Type 3)**
   - Example: "What is the Isl1 gene?"
   - Query definitions and information for specific bioinformatics terms

### Supported Entity Types

- Gene
- Protein
- Mutation
- Chemical
- Disease
- Phenotype
- Process
- Function
- Pathway
- Cell_Component
- Species
- Cell
- Tissue

## System Architecture

### Workflow Nodes

```
START → Translator → Optant → [Extractor → Hybrid Searcher → Reranker → Executor] / General Responder → END
```

1. **Translator**
   - Translates user questions to English (if needed)
   - Ensures accuracy of bioinformatics terminology

2. **Optant (Intent Classifier)**
   - Identifies user intent and classifies question type (Type 1/2/3 or general)
   - Determines subsequent execution path

3. **Extractor (Entity Extractor)**
   - Extracts biological entities and their types from questions
   - Identifies target query category (for Type 1 questions)

4. **Hybrid Searcher**
   - Performs hybrid retrieval using string index and vector index
   - Returns candidate matches for each entity (Top-K)

5. **Reranker**
   - Selects the best matching entity from candidates based on question context
   - Disambiguates to ensure correct biological entity selection

6. **Executor**
   - Executes corresponding query script based on question type
   - Calls BRICK knowledge graph system to retrieve results

7. **General Responder**
   - Handles general questions not related to bioinformatics


## Tech Stack

- **LLM Framework**: LangChain, LangGraph
- **Knowledge Graph**: Neo4j
- **Search Engine**: Elasticsearch (Hybrid retrieval: String + Vector)
- **Embedding**: OpenAI Text Embedding
- **Language Model**: OpenAI API compatible interface (supports Qwen-max, etc.)

## Workflow Details

1. **Question Input**: User asks in natural language
2. **Translation**: Translate non-English questions to English
3. **Intent Recognition**: Determine question type (Type 1/2/3 or general)
4. **Entity Extraction**: Identify biological entities and types in the question
5. **Hybrid Retrieval**: Search knowledge base for candidates for each entity
6. **Reranking**: Select best match based on context
7. **Query Execution**: Execute specialized query script in knowledge graph
8. **Result Return**: Return structured query results

## Output Format

Query results typically include:
- Relational data in CSV format (saved in `output_files/` directory)
- Natural language interpretation generated by LLM
- Detailed information about related entities and relationships


